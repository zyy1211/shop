angular.module("shopApp",["ionic","RongWebIMWidget","app.tabs","app.home","app.integral","app.stores","app.person","App.httpFactory","cftApp.slideBox","app.homeDetail","app.loveGoods","app.shopCart","app.order","app.appraise","app.myIntegral","app.address","app.shopCart1"]).config(["$stateProvider","$urlRouterProvider",function(e,t){e.state("tabs",{url:"/tabs",views:{index:{templateUrl:"tabs.html",controller:"tabsCtr",abstract:!0}}}),t.otherwise("tabs/home")}]),angular.module("app.home",["ionic"]).config(["$stateProvider",function(e){e.state("tabs.home",{url:"/home",views:{home:{templateUrl:"home.html",controller:"homeCtr"}}})}]).controller("homeCtr",["$scope","HttpFactory","$ionicModal","$state","$ionicTabsDelegate","$ionicSideMenuDelegate",function(e,t,o,a,n,r){function s(t){t.stopPropagation(),e.modal.show()}function i(){console.log("ssss"),a.go("tabs.homeDetail")}function l(){r.toggleRight()}function c(t){"add"==t&&e.home.goodsNum++,"reduce"==t&e.home.goodsNum>1&&e.home.goodsNum--}function d(e){e.stopPropagation();var t=angular.element(document.querySelector(".service"));t.css({positive:"absolute",top:e.gesture.center.pageY-36+"px",left:e.gesture.center.pageX-36+"px"}),e.gesture.center.pageX+36>window.screen.width&&t.css({positive:"absolute",left:window.screen.width-72+"px"}),e.gesture.center.pageX-36<0&&t.css({positive:"absolute",left:0}),e.gesture.center.pageY+86>window.screen.height&&t.css({positive:"absolute",top:window.screen.height-130+"px"}),e.gesture.center.pageY-76<0&&t.css({positive:"absolute",top:"44px"})}e.home={autoImg:"",goodsNum:1,addComm:s,goods:"",empty:!1,serMove:d,openDetail:i,toggleRight:l,changeNum:c},e.$on("$ionicView.beforeEnter",function(){n.showBar(!0)});var m=[],u="http://114.112.94.166/sunny/wap/api/getGoods";t.getData(u).then(function(t){console.log(t);for(var o=0;o<t.bannerData.length;o++){var a={imgsrc:t.bannerData[o].image_url};m.push(a)}e.home.autoImg=m,e.home.goods=t.goodsData,console.log(e.home.goods)}),o.fromTemplateUrl("my-modal.html",{scope:e,animation:"slide-in-up"}).then(function(t){e.modal=t}),e.$on("$destroy",function(){e.modal.remove()})}]),angular.module("app.integral",["ionic"]).config(["$stateProvider",function(e){e.state("tabs.integral",{url:"/integral",views:{integral:{templateUrl:"integral.html",controller:"integralCtr"}}})}]).controller("integralCtr",["$scope","HttpFactory","$ionicSideMenuDelegate",function(e,t,o){function a(){o.toggleRight()}e.integral={autoImg:"",goods:"",toggleRight:a};var n=[],r="http://114.112.94.166/sunny/wap/api/getGoods";t.getData(r).then(function(t){e.integral.goods=t.goodsData;for(var o=0;o<t.bannerData.length;o++){var a={imgsrc:t.bannerData[o].image_url};n.push(a)}e.integral.autoImg=n})}]),angular.module("app.stores",["ionic"]).config(["$stateProvider",function(e){e.state("tabs.stores",{url:"/stores",views:{stores:{templateUrl:"stores.html",controller:"storesCtr"}}})}]).controller("storesCtr",["$scope",function(e){}]),angular.module("app.person",["ionic"]).config(["$stateProvider",function(e){e.state("tabs.person",{url:"/person",views:{person:{templateUrl:"person.html",controller:"personCtr"}}})}]).controller("personCtr",["$scope","$state","$ionicTabsDelegate","$ionicViewSwitcher",function(e,t,o,a){function n(){t.go("tabs.loveGoods")}function r(){t.go("tabs.person-order")}function s(){t.go("tabs.shopCart1"),a.nextDirection("forward")}function i(){t.go("tabs.ps-integral")}function l(){t.go("tabs.address")}e.person={loveGoods:n,myOrder:r,openCar:s,openIntegral:i,openAddress:l},e.$on("$ionicView.beforeEnter",function(){o.showBar(!0)})}]),angular.module("app.tabs",[]).controller("tabsCtr",["$scope","RongCustomerService",function(e,t){var o=window.screen.width,a=window.screen.height;t.init({appkey:"x4vkb1qpx4zkk",token:"JTEnduiiY+qrg1TFNx8jm/m3RkAeK2x5wrG+dvon/6xoPqVKM1irzYe2R/wGLSSwCjFCU5Bd3q0=",customerServiceId:"KEFU148300320552496",style:{width:o,height:a-60},position:t.Position.right,onSuccess:function(){var e=angular.element(document.getElementById("rong-widget-minbtn"));e.css("bottom","8rem"),e.css("right","2rem")}}),e.$on("$stateChangeSuccess",function(e,t,o){var a=function(e){document.getElementsByTagName("body")[0];document.title=e;var t=document.createElement("iframe");t.addEventListener("load",function(){setTimeout(function(){document.body.removeChild(t)})}),document.body.appendChild(t)},n=angular.element(document.getElementById("rong-widget-minbtn"));switch(t.url){case"/home":a("首页"),n.css("display","block");break;case"/integral":a("积分商城"),n.css("display","block");break;case"/stores":a("加盟店"),n.css("display","none");break;case"/person":a("个人中心"),n.css("display","none")}})}]),angular.module("cftApp.slideBox",[]).directive("mgSlideBox",[function(){return{restrict:"E",scope:{sourceArray:"="},templateUrl:"slideBox.html",controller:["$scope","$state","$ionicSlideBoxDelegate","$element",function(e,t,o,a){e.goToDetailView=function(e){};a[0].lastChild;e.$watch("sourceArray",function(t,o){t&&t.length&&(e.isShowSlide=!1,setTimeout(function(){e.isShowSlide=!0}))}),o.$getByHandle("mainSlideBox").enableSlide(!1),e.drag=function(e){o.$getByHandle("mainSlideBox").enableSlide(!1),e.stopPropagation()}}],replace:!0,link:function(e,t,o){}}}]),angular.module("App.httpFactory",[]).factory("HttpFactory",["$http","$q",function(e,t){return{getData:function(o,a,n){if(o){var r=t.defer();return n=n?n:"GET",a=a?a:{},e({url:o,params:a,method:n,timeout:2e4,cache:!0}).then(function(e){e=e.data,r.resolve(e)},function(e){r.reject(e)}),r.promise}}}}]),angular.module("app.homeDetail",["ionic"]).config(["$stateProvider",function(e){e.state("tabs.homeDetail",{url:"/homeDetail",views:{home:{templateUrl:"homeDetail.html",controller:"homeDetailCtr"}}})}]).controller("homeDetailCtr",["$scope","$ionicTabsDelegate","$ionicModal","$state","$timeout",function(e,t,o,a,n){function r(t){var o=angular.element(document.querySelector(".goodsInfo")).children();o.removeClass("active"),angular.element(t.target).addClass("active"),"商品详情"==t.target.innerHTML&&(e.homeDetail.goodsDetail="homeDetail-1.html"),"商品参数"==t.target.innerHTML&&(e.homeDetail.goodsDetail="homeDetail-2.html"),t.target.innerHTML.indexOf("评价")!=-1&&(e.homeDetail.goodsDetail="homeDetail-3.html")}function s(t){t.stopPropagation(),e.modal.show()}function i(t){"add"==t&&e.homeDetail.goodsNum++,"reduce"==t&e.homeDetail.goodsNum>1&&e.homeDetail.goodsNum--}function l(){a.go("tabs.home")}function c(){a.go("tabs.shopCart")}function d(){e.modalHeart.show(),e.homeDetail.collect=!e.homeDetail.collect,n(function(){e.modalHeart.hide()},80)}e.homeDetail={goodsDetail:"homeDetail-1.html",gSellOut:!1,collect:!1,changeDetail:r,shopNum:s,goodsNum:1,changeNum:i,backHome:l,openShopCart:c,change:d},o.fromTemplateUrl("my-modal.html",{scope:e,animation:"slide-in-up"}).then(function(t){e.modal=t}),e.$on("$destroy",function(){e.modal.remove()}),o.fromTemplateUrl("heart.html",{scope:e,animation:"slide-in-down"}).then(function(t){e.modalHeart=t}),e.$on("$ionicView.beforeEnter",function(){t.showBar(!1)})}]),angular.module("app.loveGoods",["ionic"]).config(["$stateProvider",function(e){e.state("tabs.loveGoods",{url:"/loveGoods",views:{person:{templateUrl:"loveGoods.html",controller:"loveGoodsCtr"}}})}]).controller("loveGoodsCtr",["$scope","$ionicTabsDelegate",function(e,t){e.$on("$ionicView.beforeEnter",function(){t.showBar(!1)}),e.favorite={data:[{imgsrc:"images/myOrder.png",title:"阳澄湖大闸蟹",content:"健脑 降低胆固醇 益寿美容 健脑 降低胆固醇 益寿美容",price:"258元",some:!1,src:"images/wastebin.png"},{imgsrc:"images/myOrder.png",title:"阳澄湖大闸蟹",content:"健脑 降低胆固醇 益寿美容 健脑 降低胆固醇 益寿美容",price:"3000积分",some:!0,src:"images/wastebin.png"},{imgsrc:"images/myOrder.png",title:"阳澄湖大闸蟹",content:"健脑 降低胆固醇 益寿美容 健脑 降低胆固醇 益寿美容",price:"258元",some:!1,src:"images/wastebin.png"}]}}]),angular.module("app.shopCart",["ionic"]).config(["$stateProvider",function(e){e.state("tabs.shopCart",{url:"/shopCart",views:{home:{templateUrl:"shopCart.html",controller:"shopCartCtr"}}})}]).controller("shopCartCtr",["$scope","$ionicPopup","$ionicTabsDelegate",function(e,t,o){function a(o,a){t.confirm({cssClass:"Order",title:"确定要删除该商品吗?",scope:e,buttons:[{text:"取消",onTap:function(e){console.log("取消")}},{text:"确定",onTap:function(t){console.log("确定"),e.shopCart.data.splice(a,1)}}]})}function n(e){console.log(e.target),angular.element(e.target).toggleClass("active")}function r(e){angular.element(e.target).toggleClass("active"),e.target.className.indexOf("active")!=-1?angular.element(document.querySelectorAll(".point")).addClass("active"):angular.element(document.querySelectorAll(".point")).removeClass("active")}e.shopCart={data:[{imgsrc:"images/myOrder.png",content:"买一份送一份阳澄湖大闸蟹母螃蟹3.2-3.0两6只鲜活现货礼盒装",num:2,price:258,some:!1,src:"images/wastebin.png"},{imgsrc:"images/myOrder.png",content:"买一份送一份阳澄湖大闸蟹母螃蟹3.2-3.0两6只鲜活现货礼盒装",num:1,price:258,some:!1,src:"images/wastebin.png"},{imgsrc:"images/myOrder.png",content:"买一份送一份阳澄湖大闸蟹母螃蟹3.2-3.0两6只鲜活现货礼盒装",num:3,price:258,some:!0,src:"images/wastebin.png"}],remove:a,chose:n,choseAll:r},e.$on("$ionicView.beforeEnter",function(){o.showBar(!1)})}]),angular.module("app.order",["ionic"]).config(["$stateProvider",function(e){e.state("tabs.person-order",{url:"/person-order",views:{person:{templateUrl:"person-order.html",controller:"orderCtr"}}})}]).controller("orderCtr",["$scope","$ionicTabsDelegate","$ionicPopup","$state","some",function(e,t,o,a,n){function r(t){var o=angular.element(t.currentTarget).children();switch(t.target!=t.currentTarget&&(o.removeClass("active"),angular.element(t.target).addClass("active")),t.target.innerHTML){case"待付款":e.psOrder.stateFilter="待付款";break;case"待发货":e.psOrder.stateFilter="待发货";break;case"待付款":e.psOrder.stateFilter="待付款";break;case"待收货":e.psOrder.stateFilter="待收货";break;case"待评价":e.psOrder.stateFilter="交易成功";break;case"全&nbsp;部":e.psOrder.stateFilter=""}}function s(t){o.confirm({cssClass:"Order",title:"确认要取消订单吗?",scope:e,buttons:[{text:"取消",onTap:function(){console.log("取消")}},{text:"确定",onTap:function(){t.state="交易关闭",t.orde=5}}]})}function i(t){o.confirm({cssClass:"Order",title:"确认是否已收到货?",scope:e,buttons:[{text:"取消",onTap:function(){console.log("取消")}},{text:"确定",onTap:function(){console.log("确定"),console.log(t),t.state="交易成功",t.comments=!0}}]})}function l(t){o.show({cssClass:"Order-R",template:'<textarea placeholder="请输入申请退货的原因?"></textarea><div class="number">10/100</div>',title:"申请退款",scope:e,buttons:[{text:"取消",onTap:function(){}},{text:"确定",onTap:function(){t.state="退货中"}}]})}function c(e){a.go("tabs.appraise"),n.states=e}e.psOrder={changeState:r,stateFilter:"",showConfirm:s,showPopup:l,showOk:i,openAppraise:c},e.data=[{num:"1100335566",orde:0,state:"待付款",freight:"8",total:"2",totalP:"516",goods:[{amount:10,imgsrc:"images/myOrder.png",detail:"买一份送一份日王阳澄湖大闸蟹全母螃蟹3.2-3.0两6只鲜活现货礼盒装",price:"258"},{amount:10,imgsrc:"images/myOrder.png",detail:"买一份送一份日王阳澄湖大闸蟹全母螃蟹3.2-3.0两6只鲜活现货礼盒装",price:"258"}]},{num:"2222222266",orde:1,state:"待发货",freight:"8",total:"2",totalP:"516",goods:[{amount:10,imgsrc:"images/myOrder.png",detail:"买一份送一份日王阳澄湖大闸蟹全母螃蟹3.2-3.0两6只鲜活现货礼盒装",price:"258"}]},{num:"3333336666",orde:2,state:"待收货",freight:"8",total:"2",totalP:"516",goods:[{amount:10,imgsrc:"images/myOrder.png",detail:"买一份送一份日王阳澄湖大闸蟹全母螃蟹3.2-3.0两6只鲜活现货礼盒装",price:"258"}]},{num:"4444446666",orde:3,state:"交易成功",comments:!0,freight:"8",total:"2",totalP:"516",goods:[{amount:10,imgsrc:"images/myOrder.png",detail:"买一份送一份日王阳澄湖大闸蟹全母螃蟹3.2-3.0两6只鲜活现货礼盒装",price:"258"}]},{num:"5555556666",orde:4,state:"交易成功",comments:!1,freight:"8",total:"2",totalP:"516",goods:[{amount:10,imgsrc:"images/myOrder.png",detail:"买一份送一份日王阳澄湖大闸蟹全母螃蟹3.2-3.0两6只鲜活现货礼盒装",price:"258"}]}],e.$on("$ionicView.beforeEnter",function(){t.showBar(!1)})}]).value("some",{}),angular.module("app.appraise",["ionic"]).config(["$stateProvider",function(e){e.state("tabs.appraise",{url:"/appraise",views:{person:{templateUrl:"person-appraise.html",controller:"appraiseCtr"}}})}]).controller("appraiseCtr",["$scope","$ionicTabsDelegate","$state","some",function(e,t,o,a){function n(e){if(e.target!=e.currentTarget){var t=angular.element(e.currentTarget).children();t.removeClass("active");for(var o=0;o<t.length&&(angular.element(t[o]).addClass("active"),t[o]!=e.target);o++);}}function r(){o.go("tabs.person-order"),a.states.comments=!1}e.appraise={starFull:n,backOrder:r},e.$on("$ionicView.beforeEnter",function(){t.showBar(!1)})}]),angular.module("app.myIntegral",["ionic"]).config(["$stateProvider",function(e){e.state("tabs.ps-integral",{url:"/ps-integral",views:{person:{templateUrl:"person-integral.html",controller:"ps-integralCtr"}}})}]).controller("ps-integralCtr",["$scope","$ionicTabsDelegate",function(e,t){e.$on("$ionicView.beforeEnter",function(){t.showBar(!1)})}]),angular.module("app.address",["ionic"]).config(["$stateProvider",function(e){e.state("tabs.address",{url:"/address",views:{person:{templateUrl:"person-address.html",controller:"addressCtr"}}})}]).controller("addressCtr",["$scope","$ionicTabsDelegate","HttpFactory","$ionicPopup","$ionicModal",function(e,t,o,a,n){function r(){e.address.zyy=e.address.provinces,e.modal1.show()}function s(){console.log("sssssssssss"),e.address.zyy=e.address.cities,e.modal1.show()}function i(){o.getData(g,{},"GET").then(function(t){console.log(t),e.address.data=t.addressData,console.log("ddddddddddddddddddddddddd"),console.log(e.address.data)})}function l(e){var t=angular.element(document.querySelectorAll(".imgA"));t.removeClass("active"),angular.element(e.target).addClass("active")}function c(t,o){a.confirm({cssClass:"Order",title:"确认要删除该地址吗?",scope:e,buttons:[{text:"取消",onTap:function(){console.log("取消")}},{text:"确定",onTap:function(){console.log("确定"),e.address.data.splice(o,1)}}]})}function d(t){console.log(t),e.modal.show();var o=document.querySelector(".name"),a=document.querySelector(".tel"),n=document.querySelector(".adsDetail"),r=document.querySelector(".code");t?(o.value=t.vname,a.value=t.tel,n.value=t.address,r.value=t.code,e.address.some=t):(o.value="",a.value="",n.value="",r.value="",e.address.some="")}function m(){e.modal.hide()}function u(e){var t=angular.element(document.querySelectorAll(".point")),o=document.querySelectorAll(".provid");t.removeClass("active"),angular.element(t[e]).addClass("active"),document.querySelector(".pro-selet").value=document.querySelector(".pro-selet").value=o[e].innerHTML}function p(){var t=document.querySelector(".name").value,a=document.querySelector(".tel").value,n=document.querySelector(".adsDetail").value,r=document.querySelector(".code").value;e.address.some?(e.address.some.vname=t,e.address.some.tel=a,e.address.some.address=n,e.address.some.code=r):(e.address.obj={vname:t,tel:a,address:n,code:r,city:"郑州",province:"河南"},console.log(e.address.obj),o.getData(g,e.address.obj,"post").then(function(e){console.log(e),i()})),e.modal.hide(),t.value="",a.value="",n.value="",r.value=""}e.address={data:[],obj:{},defaultAds:l,removeAds:c,edit:d,removeModal:m,saveAds:p,some:"",area:r,area1:s,change:u,zyy:"",provinces:{pro:"选择省份",divide:["黑龙江","吉林","辽宁","江苏","山东","安徽","河北","河南","湖北","湖南","江西","陕西","山西","四川","青海","海南","广东","贵州","浙江","福建","台湾","甘肃","云南","北京 ","上海","天津","重庆"]},cities:{pro:"选择城市",divide:["郑州","开封","洛阳","南阳","漯河","许昌","三门峡","平顶山","周口","驻马店","新乡","鹤壁","焦作","濮阳","安阳","商丘","信阳","济源"]}},e.$on("$ionicView.beforeEnter",function(){t.showBar(!1)});var g="http://114.112.94.166/sunny/wap/api/uAddress?sessid=106";i(),n.fromTemplateUrl("modal-address.html",{scope:e,animation:"slide-in-up"}).then(function(t){e.modal=t}),e.$on("$destroy",function(){e.modal.remove()}),n.fromTemplateUrl("modal-address-1.html",{scope:e,animation:"slide-in-down"}).then(function(t){e.modal1=t})}]),angular.module("app.shopCart1",["ionic"]).config(["$stateProvider",function(e){e.state("tabs.shopCart1",{url:"/shopCart1",views:{person:{templateUrl:"shopCart-1.html",controller:"shopCartCtr1"}}})}]).controller("shopCartCtr1",["$scope","$ionicPopup","$ionicTabsDelegate",function(e,t,o){function a(o,a){t.confirm({cssClass:"Order",title:"确定要删除该商品吗?",scope:e,buttons:[{text:"取消",onTap:function(e){console.log("取消")}},{text:"确定",onTap:function(t){console.log("确定"),e.shopCart.data.splice(a,1)}}]})}function n(e){console.log(e.target),angular.element(e.target).toggleClass("active")}function r(e){angular.element(e.target).toggleClass("active"),e.target.className.indexOf("active")!=-1?angular.element(document.querySelectorAll(".point")).addClass("active"):angular.element(document.querySelectorAll(".point")).removeClass("active")}e.shopCart1={data:[{imgsrc:"images/myOrder.png",content:"买一份送一份阳澄湖大闸蟹母螃蟹3.2-3.0两6只鲜活现货礼盒装",num:2,price:258,some:!1,src:"images/wastebin.png"},{imgsrc:"images/myOrder.png",content:"买一份送一份阳澄湖大闸蟹母螃蟹3.2-3.0两6只鲜活现货礼盒装",num:1,price:258,some:!1,src:"images/wastebin.png"},{imgsrc:"images/myOrder.png",content:"买一份送一份阳澄湖大闸蟹母螃蟹3.2-3.0两6只鲜活现货礼盒装",num:3,price:258,some:!0,src:"images/wastebin.png"}],remove:a,chose:n,choseAll:r},e.$on("$ionicView.beforeEnter",function(){o.showBar(!1)})}]);